# Các hoạt động cơ bản trong Angular
## 1. Cách hoạt động, cấu trúc conponent trong Angular
- **Component**: Là một phần của giao diện người dùng, bao gồm HTML, CSS và TypeScript. Mỗi component có thể được coi là một "khối xây dựng" của ứng dụng Angular.
- **Module**: Là một tập hợp các component, dịch vụ và các phần khác của ứng dụng. Mỗi ứng dụng Angular có ít nhất một module gốc (root module).
- **Template**: Là phần HTML của component, nơi bạn định nghĩa giao diện người dùng
- **Metadata**: Là thông tin bổ sung về component, được định nghĩa bằng decorator như `@Component`.
- **Data Binding**: Là cơ chế kết nối dữ liệu giữa component và template. Angular hỗ trợ nhiều loại data binding như interpolation, property binding, event binding và two-way binding.
- **Dependency Injection**: Là một mô hình thiết kế cho phép các component và dịch vụ nhận các phụ thuộc của chúng từ bên ngoài, giúp quản lý mã nguồn dễ dàng hơn.

### 1.1. Cấu trúc component
- **Selector**: Là tên của component được sử dụng trong template HTML. Ví dụ: `<app-root>`.
- **Template**: Là phần HTML của component, có thể được định nghĩa trực tiếp trong decorator `@Component` hoặc thông qua một file HTML riêng biệt.
- **Styles**: Là phần CSS của component, có thể được định nghĩa trực tiếp trong decorator `@Component` hoặc thông qua một file CSS riêng biệt.
- **Class**: Là phần TypeScript của component, nơi bạn định nghĩa logic và dữ liệu của component.
- **Decorator**: Là một hàm được sử dụng để thêm metadata cho class, ví dụ như `@Component`, `@Injectable`, v.v.

VD:
```typescript
import { Component } from '@angular/core';
@Component({
  selector: 'app-example', // Tên selector của component sẽ được sử dụng trong template HTML
  templateUrl: './example.component.html', // Đường dẫn đến file HTML của component
  styleUrls: ['./example.component.css'] // Đường dẫn đến file CSS của component
})
export class ExampleComponent {
}
```
```template
<h1>Welcome to {{ title }}!</h1>
<p>This is an example component.</p>
```
```css
h1 {
  color: blue;
}
p {
  font-size: 16px;
}
```

> Muốn import component vào component khác để template có thể sử dụng, bạn cần khai báo component đó trong component cha chứa component đó, đặt trong biến `imports` của decorator `@Component` hoặc trong module chứa component đó.
```typescript
import { Component } from '@angular/core';
import { ExampleComponent } from './example/example.component';
@Component({
    selector: 'app-root',
    templateUrl: './app.component.html',
    styleUrls: ['./app.component.css'],
    imports: [ExampleComponent] // Import component ExampleComponent để sử dụng trong template của component này
})
export class AppComponent {};
```

### 1.2. Cách truyền dữ liệu từ component vào template
- Các giá trị, biến được định nghĩa trong khai báo class của component sẽ được sử dụng trong template của component đó.
- Có các loại giá trị có thể truyền vào template:
  - **Biến**: Các biến được định nghĩa trong class của component. Trong template, bạn có thể sử dụng cú pháp `{{ variableName }}` để hiển thị giá trị của biến.
  - **Hàm get <tên-hàm>**: Các hàm được định nghĩa trong class của component, có thể được gọi trong template. Trong template, bạn có thể sử dụng cú pháp `{{ getFunctionName() }}` để gọi hàm và hiển thị giá trị trả về.
  - **Hàm on<tên-hàm>**: Các hàm được định nghĩa trong class của component, thường được sử dụng để xử lý sự kiện. Trong template, bạn có thể sử dụng cú pháp `(eventName)="onFunctionName()"` để gọi hàm khi sự kiện xảy ra.
- **Ví dụ**:
```typescript
import { Component } from '@angular/core';
@Component({
  selector: 'app-example',
  templateUrl: './example.component.html',
  styleUrls: ['./example.component.css']
})
export class ExampleComponent {
  title: string = 'Angular Example'; // Biến được sử dụng trong template
  count: number = 0; // Biến đếm

  getCount(): number { // Hàm get để lấy giá trị count
    return this.count;
  }

  onIncrement(): void { // Hàm xử lý sự kiện khi nút được nhấn
    this.count++;
  }
}
```
```template
<h1>{{ title }}</h1>
<p>Count: {{ getCount() }}</p>
<button (click)="onIncrement()">Increment</button>
```

- Ngoài ra, bạn có thể sử dụng các kỹ thuật data binding để liên kết dữ liệu giữa component và template:
    - **Event Binding**: Sử dụng dấu ngoặc đơn `()` để liên kết sự kiện của HTML với phương thức trong component.
    - **Two-Way Binding**: Sử dụng cú pháp `[(ngModel)]` để liên kết dữ liệu giữa component và template, cho phép cập nhật dữ liệu hai chiều.
    - **Attribute Binding**: Sử dụng cú pháp `[attr.attributeName]` để liên kết thuộc tính của HTML với giá trị trong component.
    - **Class Binding**: Sử dụng cú pháp `[class.className]` để liên kết class của HTML với giá trị trong component.
    - **Style Binding**: Sử dụng cú pháp `[style.styleName]` để liên kết style của HTML với giá trị trong component.
    - **Property Binding**: Sử dụng dấu ngoặc vuông `[]` để liên kết thuộc tính của HTML với giá trị trong component.
    - **Interpolation**: Sử dụng dấu ngoặc kép kép `{{ }}` để chèn giá trị từ component vào template.

### 1.3. Cách truyền dữ liệu từ template vào component
- Để truyền dữ liệu từ template vào component, bạn có thể sử dụng các kỹ thuật data binding như:
  - **Event Binding**: Sử dụng cú pháp `(eventName)="methodName($event)"` để gọi phương thức trong component khi sự kiện xảy ra, và truyền dữ liệu từ sự kiện vào phương thức.
  - **Two-Way Binding**: Sử dụng cú pháp `[(ngModel)]="property"` để liên kết dữ liệu hai chiều giữa template và component.
- **Ví dụ**:
```typescript
import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';
@Component({
  selector: 'app-example',
  templateUrl: './example.component.html',
  styleUrls: ['./example.component.css'],
  imports: [FormsModule] // Import FormsModule để sử dụng ngModel
})
export class ExampleComponent {
  name: string = ''; // Biến để lưu tên người dùng

  onSubmit(): void { // Hàm xử lý sự kiện khi form được submit
    console.log('Submitted name:', this.name);
  }
}
```
```template
<form (ngSubmit)="onSubmit()">
  <label for="name">Name:</label>
  <input type="text" id="name" [(ngModel)]="name" name="name"> <!-- Sử dụng ngModel để liên kết dữ liệu hai chiều -->
  <button type="submit">Submit</button>
</form>
```

### 1.4. Cách sử dụng các component con trong component cha
- Để sử dụng các component con trong component cha, bạn cần thực hiện các bước sau
  1. **Import Component Con**: Import component con vào component cha.
  2. **Khai báo trong Decorator**: Thêm component con vào mảng `imports` trong decorator `@Component` của component cha.
  3. **Sử dụng Selector**: Sử dụng selector của component con trong template của component cha.
- **Ví dụ**:
```typescript
import { Component } from '@angular/core';
import { ChildComponent } from './child/child.component'; // Import component con
@Component({
  selector: 'app-parent',
  templateUrl: './parent.component.html',
  styleUrls: ['./parent.component.css'],
  imports: [ChildComponent] // Khai báo component con trong mảng imports
})
export class ParentComponent {
  parentData: string = 'Data from Parent'; // Dữ liệu từ component cha
}
```

### 1.5. Cách sử dụng các component con trong component cha
- Để sử dụng các component con trong component cha và truyền dữ liệu từ component cha vào component con, bạn có thể sử dụng:
  - **@Input Decorator**: Sử dụng decorator `@Input` trong component con để nhận dữ liệu từ component cha. `input()` khi muốn sử dụng signal trong component con.
  - **Property Binding**: Sử dụng cú pháp `[propertyName]="value"` trong template của component cha để truyền dữ liệu vào component con.

**Ví dụ**:
```typescript
import { Component, Input } from '@angular/core';
@Component({
  selector: 'app-child',
  templateUrl: './child.component.html',
  styleUrls: ['./child.component.css']
})
export class ChildComponent {
  @Input() childData: string = ''; // Nhận dữ liệu từ component cha
}
```
```template
<p>Child Component</p>
<p>Data from Parent: {{ childData }}</p>
```
```typescript 
import { Component } from '@angular/core';
import { ChildComponent } from './child/child.component'; // Import component con
@Component({
  selector: 'app-parent',
  templateUrl: './parent.component.html',
  styleUrls: ['./parent.component.css'],
  imports: [ChildComponent] // Khai báo component con trong mảng imports
})
export class ParentComponent {
  parentData: string = 'Data from Parent'; // Dữ liệu từ component cha
}
```
```template
<h1>Parent Component</h1>
<p>{{ parentData }}</p>
<app-child [childData]="parentData"></app-child> <!-- Sử dụng component con và truyền dữ liệu -->
``` 

- Để sử dụng nút sự kiện trong component con, bạn có thể sử dụng:
  - **@Output Decorator**: Sử dụng decorator `@Output` trong component con để phát ra sự kiện khi có hành động xảy ra, và sử dụng cú pháp `(eventName)="handler($event)"` trong template của component cha để lắng nghe sự kiện đó.
  - **EventEmitter**: Sử dụng `EventEmitter` để phát ra sự kiện từ component con.
**Ví dụ**:
```typescript
import { Component, Output, EventEmitter } from '@angular/core';
@Component({
  selector: 'app-child',
  templateUrl: './child.component.html',
  styleUrls: ['./child.component.css']
})
export class ChildComponent {
  @Output() childEvent = new EventEmitter<string>();

  triggerEvent(): void {
    this.childEvent.emit('Data from Child');
  }
}
```
```template
<p>Child Component</p>
<button (click)="triggerEvent()">Trigger Event</button>
```
```typescript
import { Component } from '@angular/core';
import { ChildComponent } from './child/child.component'; // Import component con
@Component({
  selector: 'app-parent',
  templateUrl: './parent.component.html',
  styleUrls: ['./parent.component.css'],
  imports: [ChildComponent] // Khai báo component con trong mảng imports
})
export class ParentComponent {
  parentData: string = 'Data from Parent'; // Dữ liệu từ component cha

  handleChildEvent(data: string): void {
    console.log('Received from Child:', data);
  }
}
```
```template
<h1>Parent Component</h1>
<p>{{ parentData }}</p>
<app-child (childEvent)="handleChildEvent($event)"></app-child> <!-- Sử dụng component con và lắng nghe sự kiện -->
```

## 2. Signal trong Angular
- **Signal** là một tính năng mới trong Angular, cho phép bạn quản lý trạng thái và dữ liệu một cách hiệu quả hơn. Signal giúp bạn theo dõi sự thay đổi của dữ liệu và tự động cập nhật giao diện người dùng khi dữ liệu thay đổi.
- **Cách sử dụng Signal**:
  - **Tạo Signal**: Sử dụng hàm `signal()` để tạo một signal mới.
  - **Sử dụng Signal**: Sử dụng cú pháp `signalName()` để truy cập giá trị của signal.
  - **Cập nhật Signal**: Sử dụng cú pháp `signalName.set(value)` để cập nhật giá trị của signal.

- Các giá trị có thể sử dụng trong Signal bao gồm:
  - **Biến**: Các biến được định nghĩa trong class của component.
  - **Hàm get <tên-hàm>**: Các hàm được định nghĩa trong class của component, có thể được sử dụng để lấy giá trị từ signal.
  - **Hàm on<tên-hàm>**: Các hàm được định nghĩa trong class của component, thường được sử dụng để xử lý sự kiện.

> Lưu ý rằng để lấy giá trị từ signal, cần kết hợp với `computed()` để tạo ra một signal mới từ giá trị của signal gốc.
```typescript
import { Component, signal, computed } from '@angular/core';
@Component({
  selector: 'app-signal-example',
  templateUrl: './signal-example.component.html',
  styleUrls: ['./signal-example.component.css']
})
export class SignalExampleComponent {
  count = signal(0); // Tạo một signal với giá trị ban đầu là 0

  increment() {
    this.count.set(this.count() + 1); // Cập nhật giá trị của signal
  }

  doubleCount = computed(() => this.count() * 2); // Tạo một signal mới từ giá trị của signal gốc
}
```
```template
<h1>Signal Example Component</h1>
<p>Count: {{ count() }}</p>
<p>Double Count: {{ doubleCount() }}</p>
<button (click)="increment()">Increment</button>
```

## 3. Sử dụng các logic code trong template
- Trong Angular, bạn có thể sử dụng các logic code trong template để hiển thị dữ liệu một cách linh hoạt. Các logic này bao gồm:
  - **Điều kiện**: Sử dụng cú pháp `@if(condition)`, `@else`, `@else if(condition)` để kiểm tra điều kiện và hiển thị nội dung tương ứng.
  - **Lặp**: Sử dụng cú pháp `@for(item of items; track item.id)` để lặp qua một danh sách và hiển thị từng mục. Lưu ý rằng `track` là một tùy chọn để theo dõi các mục trong danh sách, giúp Angular tối ưu hóa việc cập nhật giao diện người dùng.
  - **Biểu thức**: Để thêm biểu thức, chúng ta có các cách sau:
    - Sử dụng cú pháp `{{ expression }}` để chèn giá trị từ component vào template.
    - Sử dụng cú pháp `@let(variable = expression)` để định nghĩa một biến trong template.
    - Sử dụng `[property]="expression"` để liên kết thuộc tính của HTML với giá trị từ component.

## 4. Sử dụng FormsModule trong Angular
- **FormsModule** là một module trong Angular cho phép bạn làm việc với các biểu mẫu (forms) một cách dễ dàng. Nó cung cấp các tính năng như two-way data binding, validation và xử lý sự kiện.
- Để sử dụng FormsModule, bạn cần import nó vào module của bạn:
- **Các tính năng chính của FormsModule**:
  - **NgModel**: Cho phép bạn liên kết dữ liệu hai chiều giữa template và component.
  - **NgSubmit**: Sử dụng để xử lý sự kiện submit của biểu mẫu.
  - **FormControl**: Đại diện cho một trường trong biểu mẫu, cho phép bạn quản lý giá trị và trạng thái của trường đó.
  - **FormGroup**: Đại diện cho một nhóm các trường trong biểu mẫu, cho phép bạn quản lý nhiều trường cùng lúc.
  - **Validation**: Cung cấp các cơ chế để kiểm tra tính hợp lệ của dữ liệu trong biểu mẫu.

>Ví dụ về cách sử dụng FormsModule trong Angular:
```typescript
import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';
@Component({
  selector: 'app-example',
  templateUrl: './example.component.html',
  styleUrls: ['./example.component.css'],
  imports: [FormsModule] // Import FormsModule để sử dụng ngModel
})
export class ExampleComponent {
  name: string = ''; // Biến để lưu tên người dùng

  onSubmit(): void { // Hàm xử lý sự kiện khi form được submit
    console.log('Submitted name:', this.name);
  }
}
```
```template
<form (ngSubmit)="onSubmit()">
  <label for="name">Name:</label>
  <input type="text" id="name" [(ngModel)]="name" name="name" required>
  <button type="submit">Submit</button>
</form>