# Directive trong Angular
## 1. Giới thiệu
Directive trong Angular là một phần quan trọng giúp mở rộng khả năng của HTML bằng cách thêm các hành vi tùy chỉnh cho các phần tử DOM. Chúng cho phép bạn tạo ra các thành phần có thể tái sử dụng và dễ dàng quản lý.

> Lưu ý nếu `directive` không được khai báo là `standalone`, bạn cần phải thêm nó vào `@NgModule` trong file module tương ứng.

## 2. Các loại Directive
Angular hỗ trợ ba loại directive chính:

1. **Component Directives**: Là các directive có template riêng và được sử dụng để tạo ra các thành phần UI.
2. **Structural Directives**: Là các directive thay đổi cấu trúc của DOM bằng cách thêm hoặc xóa các phần tử. Ví dụ: `*ngIf`, `*ngFor`.
3. **Attribute Directives**: Là các directive thay đổi thuộc tính của một phần tử DOM mà không thay đổi cấu trúc của nó. Ví dụ: `ngClass`, `ngStyle`.

## 3. Cú pháp tạo Directive

Để tạo một directive trong Angular, bạn có thể sử dụng cú pháp sau:
```bash
ng generate directive <tên-directive>
```

## 4. Ví dụ
### 4.1. Ví dụ thêm `attribute directive` vào thẻ `<a>` để thêm xác nhận khi người dùng nhấp vào liên kết, đồng thời thêm tham số truy vấn vào địa chỉ liên kết
```ts
import { Directive, ElementRef, inject, input } from "@angular/core";

@Directive({
  selector: "a[appSafeLink]",
  standalone: true,
  host: {
    "(click)": "confirmToLeave($event)",
  },
})
export class SafeLinkDirective {
  queryParam = input("", { alias: "appSafeLink" }); // Tạo input với giá trị mặc định là "" và có attribute chính là "appSafeLink" để trong template có thể sử dụng luôn bằng cách <tên directive> = "<giá trị>"

  private hostElementRef = inject<ElementRef<HTMLAnchorElement>>(ElementRef); // Lấy tham chiếu đến phần tử host (ở đây là thẻ <a>)
  constructor() {
    console.log("SafeLinkDirective initialized");
  }

  confirmToLeave(event: MouseEvent) {
    const isConfirm = window.confirm("Do you want to leave this page?"); // Hiển thị hộp thoại xác nhận

    if (isConfirm) {
      // const address = (event.target as HTMLAnchorElement).href; // Lấy địa chỉ liên kết mà người dùng muốn truy cập khi nhấp vào
      // (event.target as HTMLAnchorElement).href =
      //   address + "?form=" + this.queryParam(); // Thêm tham số truy vấn vào địa chỉ liên kết

      const address = this.hostElementRef.nativeElement.href; // Lấy địa chỉ liên kết mà người dùng muốn truy cập khi nhấp vào
      this.hostElementRef.nativeElement.href =
        address + "?form=" + this.queryParam(); // Thêm tham số truy vấn vào địa chỉ liên kết

      return;
    } // Người dùng xác nhận, cho phép chuyển hướng

    event.preventDefault(); // Ngăn chặn chuyển hướng
  }
}


```
```html
<a href="https://angular.dev" appSafeLink="myapp">Angular Documentation</a>